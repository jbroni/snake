(window.webpackJsonpngx_snake=window.webpackJsonpngx_snake||[]).push([[222,179],{222:(t,i,s)=>{"use strict";let e;function n(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}s.r(i),s.d(i,{CustomStrategy:()=>o}),function(t){t[t.left=37]="left",t[t.up=38]="up",t[t.right=39]="right",t[t.down=40]="down"}(e||(e={}));class o{constructor(){n(this,"grid",void 0),n(this,"GRID_WIDTH",18),n(this,"GRID_HEIGHT",18)}step(t){this.initializeEmptyGrid(),this.placeObstacles(t);const i=t.snake.parts[0],s=this.grid[i.x][i.y],e=this.grid[t.fruit.x][t.fruit.y];let n=this.search(s,e);if(!n){this.getNeighbors(s).find(t=>!t.isObstacle)}return n?this.getDirection(s,n):t.snake.direction}initializeEmptyGrid(){this.grid=[];for(let t=0;t<this.GRID_WIDTH;t++)this.grid.push([]);for(let t=0;t<this.GRID_WIDTH;t++)for(let i=0;i<this.GRID_HEIGHT;i++)this.grid[t][i]={g:0,h:0,f:0,parent:void 0,position:{x:t,y:i},isObstacle:!1}}placeObstacles(t){const i=t=>{this.grid[t.x][t.y].isObstacle=!0};t.obstacles.forEach(i),t.snake.parts.forEach(i)}search(t,i){let s=[];const e=[];for(s.push(t);s.length>0;){let t;if(s.forEach(i=>{(!t||i.f<t.f)&&(t=i)}),r(t.position,i.position)){let i=t;const s=[];for(;i.parent;)s.push(i),i=i.parent;return s.slice(-1).pop()}s=s.filter(i=>i!==t),e.push(t);const a=this.getNeighbors(t);for(let r=0;r<a.length;r++){const c=a[r];if(h(e,c)||c.isObstacle)continue;const p=t.g+1;let g=!1;h(s,c)?p<c.g&&(g=!0):(g=!0,c.h=(n=c.position,o=i.position,Math.abs(o.x-n.x)+Math.abs(o.y-n.y)),s.push(c)),g&&(c.parent=t,c.g=p,c.f=c.g+c.h)}}var n,o}getNeighbors(t){const i=t.position.x,s=t.position.y,e=0===i?this.GRID_WIDTH-1:i-1,n=i===this.GRID_WIDTH-1?0:i+1,o=0===s?this.GRID_HEIGHT-1:s-1,r=s===this.GRID_HEIGHT-1?0:s+1;return[this.grid[e][s],this.grid[n][s],this.grid[i][o],this.grid[i][r]]}getDirection(t,i){const s=t.position.x,n=t.position.y,o=i.position.x,r=i.position.y;return 0===s&&o===this.GRID_WIDTH-1||s-1===o?e.left:s===this.GRID_WIDTH-1&&0===o||s+1===o?e.right:0===n&&r===this.GRID_HEIGHT-1||n-1===r?e.up:e.down}}function r(t,i){return t.x===i.x&&t.y===i.y}function h(t,i){return t.find(t=>r(t.position,i.position))}}}]);